<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>Happy 20th, Jane ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com/css2?family=Pinyon+Script&family=Cormorant+Garamond:wght@400;600&family=EB+Garamond:ital@0;1&display=swap" rel="stylesheet"/>
<style>
:root {
  --cream: #fdf6ec;
  --blush: #f8bbd0;
  --rose: #e91e63;
  --gold: #d4af37;
}

* { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
body { 
    background: var(--cream); 
    font-family: 'Cormorant Garamond', serif; 
    overflow: hidden; 
    width: 100vw; height: 100vh;
}

/* START OVERLAY */
#overlay {
    position: fixed; inset: 0; background: var(--cream);
    z-index: 10000; display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    transition: opacity 0.8s ease;
}
#overlay.hidden { opacity: 0; pointer-events: none; }

/* SCENE MANAGEMENT */
.scene {
    position: absolute; inset: 0; display: flex; flex-direction: column;
    align-items: center; justify-content: center; opacity: 0; 
    pointer-events: none; transition: opacity 0.8s ease-in-out;
    padding: 20px; text-align: center;
}
.scene.active { opacity: 1; pointer-events: all; }

/* BUTTONS */
.btn {
    padding: 12px 30px; font-family: 'Pinyon Script', cursive;
    font-size: 1.8rem; background: white; border: 1.5px solid var(--blush);
    border-radius: 50px; cursor: pointer; color: var(--rose);
    box-shadow: 0 5px 15px rgba(233, 30, 99, 0.1);
    margin-top: 20px; transition: transform 0.3s;
}
.btn:active { transform: scale(0.95); }

/* GARDEN AREA */
#gardenArea {
    width: 100%; height: 45vh; background: rgba(255,255,255,0.3);
    border: 2px dashed var(--blush); border-radius: 20px;
    position: relative; overflow: hidden; margin: 15px 0;
}

/* BOUQUET SCENE */
.bouquet-container {
    position: relative; width: 100%; height: 50vh;
    display: flex; align-items: center; justify-content: center;
}
.sunflower-collected {
    position: absolute; font-size: 2.5rem;
    filter: drop-shadow(0 2px 5px rgba(0,0,0,0.1));
    animation: sway 3s ease-in-out infinite;
}
@keyframes sway { 0%, 100% { transform: rotate(-5deg); } 50% { transform: rotate(5deg); } }

/* POLAROIDS */
.cards-grid {
    display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;
    max-width: 350px; margin-top: 15px;
}
.fcard {
    background: white; padding: 8px 8px 25px 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transform: rotate(var(--r)); cursor: pointer;
}
.ftext { font-size: 0.85rem; font-style: italic; display: none; margin-top: 5px; }
.fcard.flipped .ftext { display: block; }
.fcard.flipped .fq { display: none; }

/* LETTER */
.letter-paper {
    background: #fff; padding: 30px; border-radius: 5px;
    box-shadow: 0 0 25px rgba(0,0,0,0.05);
    max-width: 90%; max-height: 60vh; overflow-y: auto;
    font-family: 'EB Garamond', serif; line-height: 1.6; text-align: left;
}

.butterfly {
    position: fixed; pointer-events: none; z-index: 9999; font-size: 1.5rem;
}
</style>
</head>
<body>

<audio id="bgMusic" loop playsinline>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<!-- START SCREEN -->
<div id="overlay">
    <h2 style="font-family:'Pinyon Script'; font-size: 3.5rem; color: var(--rose);">For Jane...</h2>
    <p style="font-style:italic; margin-bottom:20px;">(Turn on your sound)</p>
    <button class="btn" onclick="startMagic()">Open ‚ù§Ô∏è</button>
</div>

<!-- SCENE 1: CAKE -->
<section id="s1" class="scene active">
    <h1 style="font-family:'Pinyon Script'; color:var(--rose); font-size: 3rem;">Happy 20th Birthday, Jane</h1>
    <div style="font-size: 6rem; margin: 20px;">üéÇ</div>
    <button class="btn" onclick="nextScene(2)">Make a Wish</button>
</section>

<!-- SCENE 2: GARDEN -->
<section id="s2" class="scene">
    <h2 style="font-family:'Pinyon Script'; font-size: 2.2rem;">Plant 20 Flowers for 20 Years üå±</h2>
    <div id="gardenArea"></div>
    <div id="counter" style="font-weight: bold; color: var(--rose);">0 / 20 Flowers</div>
    <button id="collectBtn" class="btn" style="display:none;" onclick="nextScene(3)">Collect Bouquet üíê</button>
</section>

<!-- SCENE 3: THE BIG BOUQUET -->
<section id="s3" class="scene">
    <h2 style="font-family:'Pinyon Script'; font-size: 2.2rem;">Your 20th Birthday Bouquet</h2>
    <div class="bouquet-container" id="bouquetContainer">
        <!-- Flowers will appear here -->
    </div>
    <button class="btn" onclick="nextScene(4)">Why I Love You</button>
</section>

<!-- SCENE 4: REASONS -->
<section id="s4" class="scene">
    <h2 style="font-family:'Pinyon Script'; font-size: 2.2rem;">8 Memories of Us</h2>
    <div class="cards-grid" id="polaroidGrid"></div>
    <button id="letterBtn" class="btn" style="display:none;" onclick="nextScene(5)">Read My Letter üíå</button>
</section>

<!-- SCENE 5: LETTER -->
<section id="s5" class="scene">
    <h2 style="font-family:'Pinyon Script'; font-size: 2.5rem; margin-bottom:10px;">To My Sunshine</h2>
    <div class="letter-paper">
        <p id="typingText"></p>
    </div>
    <p style="margin-top:20px; font-family:'Pinyon Script'; font-size: 2rem; color: var(--rose);">Happy Birthday, Love.</p>
</section>

<script>
const music = document.getElementById('bgMusic');
let currentScene = 1;
let flowersPlanted = 0;

function startMagic() {
    document.getElementById('overlay').classList.add('hidden');
    music.play().catch(e => console.log("Audio waiting..."));
    createButterfly();
}

function nextScene(n) {
    document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
    currentScene = n;
    setTimeout(() => {
        const activeScene = document.getElementById(`s${n}`);
        if(activeScene) activeScene.classList.add('active');
        
        if(n === 3) populateBouquet();
        if(n === 4) setupPolaroids();
        if(n === 5) startTyping();
    }, 400);
}

// BUTTERFLY TRAIL
function createButterfly() {
    const bf = document.createElement('div');
    bf.className = 'butterfly';
    bf.innerHTML = 'ü¶ã';
    document.body.appendChild(bf);
    document.addEventListener('mousemove', (e) => {
        bf.style.left = e.clientX + 'px';
        bf.style.top = e.clientY + 'px';
    });
    document.addEventListener('touchmove', (e) => {
        bf.style.left = e.touches[0].clientX + 'px';
        bf.style.top = e.touches[0].clientY + 'px';
    });
}

// GARDEN LOGIC
const garden = document.getElementById('gardenArea');
garden.addEventListener('click', (e) => {
    if(flowersPlanted >= 20) return;
    flowersPlanted++;
    
    const f = document.createElement('div');
    f.style.position = 'absolute';
    f.style.left = (e.offsetX - 15) + 'px';
    f.style.top = (e.offsetY - 15) + 'px';
    f.innerHTML = 'üåª';
    f.style.fontSize = '2rem';
    garden.appendChild(f);
    
    document.getElementById('counter').innerText = `${flowersPlanted} / 20 Flowers`;
    if(flowersPlanted === 20) {
        document.getElementById('collectBtn').style.display = 'block';
    }
});

// BOUQUET LOGIC
function populateBouquet() {
    const container = document.getElementById('bouquetContainer');
    if(container.children.length > 0) return;
    for(let i=0; i<20; i++) {
        const f = document.createElement('div');
        f.className = 'sunflower-collected';
        // Circular arrangement for a big bouquet look
        const angle = (i / 20) * Math.PI * 2;
        const radius = Math.random() * 80 + 20; 
        const x = Math.cos(angle) * radius;
        const y = Math.sin(angle) * radius;
        
        f.style.left = `calc(50% + ${x}px)`;
        f.style.top = `calc(50% + ${y}px)`;
        f.style.animationDelay = (i * 0.1) + 's';
        f.innerHTML = 'üåª';
        container.appendChild(f);
    }
    // Add a ribbon emoji at the bottom
    const ribbon = document.createElement('div');
    ribbon.style.position = 'absolute';
    ribbon.style.top = '70%';
    ribbon.style.fontSize = '3rem';
    ribbon.innerHTML = 'üéÄ';
    container.appendChild(ribbon);
}

// POLAROID LOGIC
const reasons = ["Your Smile", "Your Kindness", "Our Bonding Together", "Your Support", "The Way You Laugh", "Your Warmth", "Your Care", "Your Heart"];
function setupPolaroids() {
    const grid = document.getElementById('polaroidGrid');
    if(grid.children.length > 0) return;
    reasons.forEach((text, i) => {
        const c = document.createElement('div');
        c.className = 'fcard';
        c.style.setProperty('--r', (Math.random() * 16 - 8) + 'deg');
        c.innerHTML = `<div class="fq" style="font-size:2rem; color:#eee;">?</div><p class="ftext">${text}</p>`;
        c.onclick = function() { 
            this.classList.add('flipped');
            this.style.background = "#fff0f5";
            checkPolaroids();
        };
        grid.appendChild(c);
    });
}

function checkPolaroids() {
    const flipped = document.querySelectorAll('.fcard.flipped').length;
    // Show letter after 4 cards are clicked
    if(flipped >= 4) document.getElementById('letterBtn').style.display = 'block';
}

// TYPING LOGIC
const message = "My Dearest Jane, Happy 20th Birthday! You have officially spent two decades making the world a better place. You are the most beautiful person I know, inside and out. As you step into this new chapter, I promise to be by your side, planting more memories and watching you bloom. You are my sunshine, my forever, and my greatest joy. I love you more than words can say.";
function startTyping() {
    let i = 0;
    const txt = document.getElementById('typingText');
    if(txt.innerHTML !== "") return; // Prevent double typing
    function type() {
        if (i < message.length) {
            txt.innerHTML += message.charAt(i);
            i++;
            setTimeout(type, 40);
        }
    }
    type();
}
</script>
</body>
</html>